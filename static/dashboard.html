<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FITS Cataloger</title>
    
    <!-- Favicon fix - uses a simple data URL to avoid 404 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”­</text></svg>">
    
    <!-- Alternative: Create a simple PNG favicon -->
    <!-- <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="> -->
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/buttons.css">
    <link rel="stylesheet" href="/static/css/tables.css">
    <link rel="stylesheet" href="/static/css/modals.css">
    <link rel="stylesheet" href="/static/css/forms.css">
    <link rel="stylesheet" href="/static/css/filters.css">
    <link rel="stylesheet" href="/static/css/cards.css">

</head>
<body class="bg-gray-100">
    <div id="app">
        <!-- Header -->
        <header class="bg-blue-600 text-white p-4 shadow-lg">
            <div class="container mx-auto flex justify-between items-center">
                <h1 class="text-2xl font-bold">FITS Cataloger</h1>
                <nav class="flex space-x-4">
                    <button @click="activeTab = 'dashboard'" 
                            :class="activeTab === 'dashboard' ? 'bg-blue-700' : 'bg-blue-500'"
                            class="px-4 py-2 rounded hover:bg-blue-700 transition">
                        Dashboard
                    </button>
                    <button @click="activeTab = 'files'" 
                            :class="activeTab === 'files' ? 'bg-blue-700' : 'bg-blue-500'"
                            class="px-4 py-2 rounded hover:bg-blue-700 transition">
                        Files
                    </button>
                    <button @click="activeTab = 'imaging-sessions'" 
                            :class="activeTab === 'imaging-sessions' ? 'bg-blue-700' : 'bg-blue-500'"
                            class="px-4 py-2 rounded hover:bg-blue-700 transition">
                        Imaging Sessions
                    </button>
                    <button @click="activeTab = 'processing-sessions'" 
                            :class="activeTab === 'processing-sessions' ? 'bg-blue-700' : 'bg-blue-500'"
                            class="px-4 py-2 rounded hover:bg-blue-700 transition">
                        Processing Sessions
                    </button>
                    <button @click="activeTab = 'operations'" 
                            :class="activeTab === 'operations' ? 'bg-blue-700' : 'bg-blue-500'"
                            class="px-4 py-2 rounded hover:bg-blue-700 transition">
                        Operations
                    </button>
                </nav>
            </div>
        </header>

        <!-- Error Message -->
        <div v-if="errorMessage" class="mx-auto p-6 max-w-none">
            <div class="error-message">
                {{ errorMessage }}
                <button @click="errorMessage = ''" class="float-right text-red-700 hover:text-red-900">&times;</button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="mx-auto p-6 max-w-none" :class="{ loading: loading }">
            <!-- Dashboard Tab -->
            <dashboard-tab v-show="activeTab === 'dashboard'"></dashboard-tab>

            <!-- Files Tab -->
            <files-tab v-show="activeTab === 'files'"></files-tab>

            <!-- Imaging Sessions Tab -->
            <imaging-sessions-tab v-show="activeTab === 'imaging-sessions'"></imaging-sessions-tab>

            <!-- Processing Sessions Tab -->
            <processing-sessions-tab v-show="activeTab === 'processing-sessions'"></processing-sessions-tab>

            <!-- Operations Tab -->
            <operations-tab v-show="activeTab === 'operations'"></operations-tab>

        </main>

        <!-- Component Modals -->
        <imaging-session-detail-modal ref="sessionDetailModal"></imaging-session-detail-modal>   
        <calibration-modal ref="calibrationModal"></calibration-modal>
        <processing-session-details-modal ref="processingDetailsModal"></processing-session-details-modal>
        <processing-session-modals ref="processingModals"></processing-session-modals>     

    </div>


    <script src="/static/js/services/api-service.js"></script>
    <script src="/static/js/components/files-browser.js"></script>
    <script src="/static/js/components/imaging-sessions.js"></script>
    <script src="/static/js/components/imaging-session-detail-modal.js"></script>
    <script src="/static/js/components/processing-sessions.js"></script>
    <script src="/static/js/components/calibration-modal.js"></script>
    <script src="/static/js/components/processing-session-details-modal.js"></script>
    <script src="/static/js/components/processing-session-modals.js"></script>
    <script src="/static/js/components/monitoring-panel.js"></script>
    <script src="/static/js/components/dashboard-tab.js"></script>
    <script src="/static/js/components/files-tab.js"></script>
    <script src="/static/js/components/imaging-sessions-tab.js"></script>
    <script src="/static/js/components/processing-sessions-tab.js"></script>
    <script src="/static/js/components/operations-tab.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>